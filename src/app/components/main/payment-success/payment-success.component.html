<div class="success-page">
  <!-- Animated Background -->
  <div class="animated-background">
    <div class="particle" *ngFor="let particle of particles; let i = index" 
         [style.left.%]="particle.x" 
         [style.top.%]="particle.y"
         [style.animation-delay.s]="particle.delay"
         [style.animation-duration.s]="particle.duration">
    </div>
  </div>

  <div class="container">
    <!-- Success Header -->
    <div class="success-header" [@fadeInDown]>
      <div class="success-icon">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <path d="M8 12L11 15L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 class="success-title">Payment Successful!</h1>
      <p class="success-message">Your booking has been confirmed and your tickets are ready.</p>
      <div class="confirmation-details">
        <div class="confirmation-item">
          <span class="detail-label">Confirmation #</span>
          <span class="detail-value">{{ bookingInfo?.reservationId || reservationId }}</span>
        </div>
        <div class="confirmation-item">
          <span class="detail-label">Payment Date</span>
          <span class="detail-value">{{ getCurrentDate() }}</span>
        </div>
      </div>
    </div>

    <!-- Ticket Section -->
    <div id="ticketContainer" class="ticket-section" [@fadeInUp]>
      <app-ticket 
        [bookingInfo]="bookingInfo" 
        [flightInfo]="flightInfo"
        *ngIf="bookingInfo && flightInfo">
      </app-ticket>

      <div class="ticket-placeholder" *ngIf="!bookingInfo || !flightInfo">
        <div class="loading-spinner"></div>
        <p>Loading your ticket...</p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons" [@fadeInUp]="{ value: '', params: { delay: '300ms' } }">
      <button class="action-button print-button" (click)="printTicket()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 9V2H18V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6 18H4C3.46957 18 2.96086 17.7893 2.58579 17.4142C2.21071 17.0391 2 16.5304 2 16V11C2 10.4696 2.21071 9.96086 2.58579 9.58579C2.96086 9.21071 3.46957 9 4 9H20C20.5304 9 21.0391 9.21071 21.4142 9.58579C21.7893 9.96086 22 10.4696 22 11V16C22 16.5304 21.7893 17.0391 21.4142 17.4142C21.0391 17.7893 20.5304 18 20 18H18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M18 14H6V22H18V14Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Print Ticket
      </button>
      
      <button class="action-button email-button email-btn" (click)="emailTicket()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Email Ticket
      </button>
      
      <button class="action-button download-button" (click)="downloadTicket()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Download PDF
      </button>
    </div>

    <!-- Next Steps -->
    <div class="next-steps" [@fadeInUp]="{ value: '', params: { delay: '500ms' } }">
      <h2 class="next-steps-title">What's Next?</h2>
      
      <div class="steps-grid">
        <div class="step-card">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <h3 class="step-title">Check-in Online</h3>
          <p class="step-description">Check-in opens 24 hours before your flight departure time.</p>
          <button class="step-button">Check-in</button>
        </div>
        
        <div class="step-card">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.3639 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="2"/>
              <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <h3 class="step-title">Manage Booking</h3>
          <p class="step-description">Add seats, meals, or make changes to your reservation.</p>
          <button class="step-button">Manage</button>
        </div>
        
        <div class="step-card">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 class="step-title">Flight Status</h3>
          <p class="step-description">Get real-time updates about your flight status.</p>
          <button class="step-button">Track Flight</button>
        </div>
      </div>
    </div>

    <!-- Customer Support -->
    <div class="support-section" [@fadeInUp]="{ value: '', params: { delay: '700ms' } }">
      <div class="support-content">
        <div class="support-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 16.92V19.92C22 20.52 21.52 21 20.92 21C9.4 21 0 11.6 0 0.08C0 -0.52 0.48 -1 1.08 -1H4.08C4.68 -1 5.16 -0.52 5.16 0.08C5.16 2.08 5.56 4.04 6.32 5.84C6.48 6.24 6.36 6.68 6.04 6.96L4.84 8.16C6.28 11.36 8.64 13.72 11.84 15.16L13.04 13.96C13.32 13.64 13.76 13.52 14.16 13.68C15.96 14.44 17.92 14.84 19.92 14.84C20.52 14.84 21 15.32 21 15.92V18.92Z" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>
        <div class="support-text">
          <h3>Need Help?</h3>
          <p>Our customer support team is available 24/7 to assist you with any questions.</p>
        </div>
        <button class="support-button">Contact Support</button>
      </div>
    </div>
  </div>
</div>